[![Electron Logo](https://www.vectorlogo.zone/logos/electronjs/electronjs-icon.svg)](https://electronjs.org/)

[![License](https://img.shields.io/badge/License-AGPL--3-brightgreen.svg)](LICENSE.md)

# Introduction

This is a software archtecture lib, with common electron solutions used by my apps.

# Instalation

Install with: `npm i @alandrade21/electron-arch -S`

In TS it is not necessary to import an @types. This project has all the necessary defifitions.

# Functionalities

## EnvironmentDetector

Class to verify if the app is runnin in development environment. This is made to allow that a "production" version can be used in the same machine used to development, preserving the production database and configuration files.

To the environment be identified as development, the app must be started with the command `ELECTRON_ENV=dev electron .`. The best way to use this is create an script in package.json file.

To use in JS: `var envDetector = require('@alandrade21/electron-arch').envDetector;`

To use in TS: `import { envDetector } from '@alandrade21/electron-arch';`

To test the environment, use `envDetector.isDev()`. If true, you are in development environment.

To see some environment variables, use `envDetector.printEnvironment()`. This method prints its output to the console.

## Error Abstraction

This lib deliver some classes for error abstraction, facilitating the error type detection.

### ErrorWrapper

This is intended as a superclass of all specific error classes used during development. It encapsulates a message and a JS error object (or anything throw during execution).

To use in JS: 

```javascript
var electronArch = require('@alandrade21/electron-arch');

class MyCustomError extends electronArch.ErrorWrapper {}
```

To use in TS: 

```typescript
import { ErrorWrapper } from '@alandrade21/electron-arch';

export class MyCustomError extends ErrorWrapper {}
```

### InvalidParameterError

This is an [ErrorWrapper](#errorWrapper) generated by a invalid use of a parameter in a method, like a required parameter not informed.

An object of this class has a consoleLog() method that prints itself to the console printing `'InvalidParameterError: '` before the message.

To use in JS, import the lib with `var electronArch = require('@alandrade21/electron-arch');` and reference the class with `electronArch.InvalidParameterError`.

To use in TS: `import { InvalidParameterError } from '@alandrade21/electron-arch';`

## MainWindowController

This is an abstraction to the electron main window initialization, created according to https://medium.com/@davembush/typescript-and-electron-the-right-way-141c2e15e4e1.

To use in JS: `var MainWindowController = require('@alandrade21/electron-arch').MainWindowController;`

To use in TS: `import { MainWindowController } from '@alandrade21/electron-arch';`

### Usage

This class hava some static utility methods. They must be called only after `app.on('ready')` event.

#### Main window initialization

After `app.on('ready')` event call `MainWindowController.initialize()`. If the main window is already initialized when this static method is called, an `MainWindowAlreadyInitializedError` is throw.

The main window created by this method is not showed automatically. To show the window call `MainWindowController.mainWindow.show()`.

If the app is fired with the --serve parameter, the main window will be loaded with the content of `http://localhost:4200`. Else, the main window will be loaded with the file `./dist/index.html`.

#### Main window access

To access the main window created use `MainWindowController.mainWindow`. This will throw an `MainWindowNotInitializedError` if the main window were not initialized yet.

## ConfigFileManager

## AppConfigurator
